<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 m-t-5" align="center">
  <label>
    <h4>REFERRAL SERVICES</h4>
  </label>
</div>
<div>
  <!--     <div class="col-xs-12 col-sm-12">
        <h4>Referral Services</h4>
    </div> -->
  <div *ngIf="showFormCondition">
    <!-- <div class="col-xs-12 col-sm-12">
      <button class="pull-right btn" (click)="showTable()">All Referrals</button>
    </div> -->
    <!-- <form novalidate #form="ngForm"> -->
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-3">
      <!--             <div class="form-group">
                <label class="control-label" for="state">State</label>
                <select class="form-control drop-arrow ng-pristine ng-valid ng-empty ng-touched" name="state" [(ngModel)]="selected_state"
                    (change)="GetDistricts(selected_state)">
                    <option *ngFor="let state of states" value={{state.stateID}}>
                        {{state.stateName}}
                    </option>
                </select> 
            </div> -->
      <md-input-container class="hide_underline" [style.width]="'100%'">
        <input mdInput class="display_none">
        <md-select required placeholder="{{currentlanguage.referral_service?.state}}" [style.width]="'100%'" [(ngModel)]="selected_state" name="state" #state="ngModel" (change)="GetDistricts(selected_state)">
          <md-option *ngFor="let state of states" [value]="state.stateID">
            {{state.stateName}}
          </md-option>
        </md-select>
        <md-hint *ngIf="(state.invalid && (state.dirty || state.touched))">
          <span class="error_text">State is required</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-3">
      <!--             <div class="form-group">
                <label class="control-label" for="district">District</label>
                <select class="form-control drop-arrow ng-pristine ng-valid ng-empty ng-touched" name="district" [(ngModel)]="selected_district"
                    (change)="GetTaluks(selected_district)">
                    <option *ngFor="let district of districts" value={{district.districtID}}>
                        {{district.districtName}}
                    </option>
                </select>
            </div> -->
      <md-input-container class="hide_underline" [style.width]="'100%'">
        <input mdInput class="display_none">
        <md-select required #district="ngModel" placeholder="{{currentlanguage.referral_service?.district}}" [style.width]="'100%'" [(ngModel)]="selected_district" name="district" (change)="GetTaluks(selected_district)">
          <md-option *ngFor="let district of districts" [value]="district.districtID">
            {{district.districtName}}
          </md-option>
        </md-select>
        <md-hint *ngIf="district.invalid && (district.dirty || district.touched)">
          <span class="error_text">District is required</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-3">
      <!--             <div class="form-group">
                <label class="control-label" for="taluk">Taluk</label>
                <select class="form-control drop-arrow ng-pristine ng-untouched ng-valid ng-empty" name="taluk" [(ngModel)]="selected_taluk"
                    (change)="GetSDTB(selected_taluk)"> -->
      <!--<option *ngFor="let taluk of taluks" value="{{taluk.talukID}}">
                        {{taluk.talukName}}
                    </option>-->
      <!--                     <option *ngFor="let taluk of taluks" value={{taluk.blockID}}>
                        {{taluk.blockName}}
                    </option>
                </select>
            </div> -->
      <md-input-container class="hide_underline" [style.width]="'100%'">
        <input mdInput class="display_none">
        <md-select placeholder="{{currentlanguage.referral_service?.taluk}}" [style.width]="'100%'" [(ngModel)]="selected_taluk" name="taluk" (change)="GetSDTB(selected_taluk)">
          <md-option *ngFor="let taluk of taluks" [value]="taluk.blockID">
            {{taluk.blockName}}
          </md-option>
        </md-select>
        <!-- <md-hint *ngIf="taluk.invalid && (taluk.dirty || taluk.touched)">
            <span class="error_text">Taluk is required</span>
          </md-hint> -->
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-3">
      <!--             <div class="form-group">
                <label class="control-label" for="sdt">Sub-District/Talluka/Block</label>
                <select class="form-control drop-arrow ng-pristine ng-untouched ng-valid ng-empty" name="sdtb" [(ngModel)]="selected_branch"> -->
      <!--<option *ngFor="let sdtb of sdtbs" value="{{sdtb.blockID}}">
                        {{sdtb.blockName}}
                    </option>-->
      <!--                     <option *ngFor="let sdtb of blocks" value={{sdtb.districtBranchID}}>
                        {{sdtb.villageName}}
                    </option>
                </select>
            </div> -->
      <md-input-container class="hide_underline" [style.width]="'100%'">
        <input mdInput class="display_none">
        <md-select placeholder="{{currentlanguage.referral_service?.sub_taluk}}" [style.width]="'100%'" [(ngModel)]="selected_branch" name="sdtb" (change)="GetSDTB(selected_taluk)">
          <md-option *ngFor="let sdtb of blocks" [value]="sdtb.districtBranchID">
            {{sdtb.villageName}}
          </md-option>
        </md-select>
        <!-- <md-hint *ngIf="branch.invalid && (branch.dirty || branch.touched)">
            <span class="error_text">Branch is required</span>
          </md-hint> -->
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-3">
      <!--             <div class="form-group has-label">
                <label class="control-label" for="whatInformation">What Information do you require?(Directory)</label>
                <select class="form-control drop-arrow ng-pristine ng-untouched ng-valid ng-empty" name="whatInformation" [(ngModel)]="selected_directory"
                    (change)="GetSubDirectory(selected_directory)">
                    <option *ngFor="let directoryItem of directory" value={{directoryItem.instituteDirectoryID}}>{{directoryItem.instituteDirectoryName}}</option>
                </select>
            </div> -->
      <md-input-container class="hide_underline" [style.width]="'100%'">
        <input mdInput class="display_none">
        <md-select required #directoryVar="ngModel" placeholder="{{currentlanguage.referral_service?.directory}}" [style.width]="'100%'" [(ngModel)]="selected_directory" name="whatInformation" (change)="GetSubDirectory(selected_directory)">
          <md-option *ngFor="let directoryItem of directory " [value]="directoryItem.instituteDirectoryID">
            {{directoryItem.instituteDirectoryName}}
          </md-option>
        </md-select>
        <md-hint *ngIf="directoryVar.invalid && (directoryVar.dirty || directoryVar.touched)">
          <span class="error_text">Directory is required</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-3">
      <!--             <div class="form-group">
                <label class="control-label" for="subDirectory">Sub Directory</label>
                <select class="form-control drop-arrow ng-pristine ng-untouched ng-valid ng-empty" name="subDirectory" [(ngModel)]="selected_sub_directory">
                    <option *ngFor="let sub_directoryItem of sub_directory" value={{sub_directoryItem.instituteSubDirectoryID}}>{{sub_directoryItem.instituteSubDirectoryName}}</option>
                </select>
            </div> -->
      <md-input-container class="hide_underline" [style.width]="'100%'">
        <input mdInput class="display_none">
        <md-select required #subDirectory="ngModel" placeholder="{{currentlanguage.referral_service?.sub_directory}}" [style.width]="'100%'" [(ngModel)]="selected_sub_directory" name="subDirectory" (change)="GetSubDirectory(selected_directory)">
          <md-option *ngFor="let sub_directoryItem of sub_directory" [value]="sub_directoryItem.instituteSubDirectoryID">
            {{sub_directoryItem.instituteSubDirectoryName}}
          </md-option>
        </md-select>
        <md-hint *ngIf="subDirectory.invalid && (subDirectory.dirty || subDirectory.touched)">
          <span class="error_text">Sub Directory is required</span>
        </md-hint>
      </md-input-container>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-3 m-t-10">
      <button type="button" class="btn cu-green-btn font-regular f-s-18" [disabled]="state.invalid || district.invalid || directoryVar.invalid || subDirectory.invalid" (click)="GetReferralDetails()">{{currentlanguage.referral_service?.search}}</button>
      <button class="pull-right btn" (click)="showTable()">{{currentlanguage.referral_service?.back}}</button>
    </div>
    <div class="col-xs-12 col-sm-12 m-t-5">
      <!--<button type="button" class="btn btn-default cu-btn-default">Search</button>-->
    </div>
    <div class="col-xs-12 col-sm-12">
      <!--<label class="control-label" for="feedbackDesc"> Description</label>
            <textarea class="form-control" rows="3" id="feedbackDescription" [(ngModel)]="description">-->
      <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9" style="padding: 0px">
        <div class=" min-height-180 border-1-g" for="subCategoryDetails">
          <span *ngFor="let detail of detailsList">
            <!--<span ng-repeat="detail in detailsList">-->
                <!--<a href="{{detail.SubCatFilePath}}" target="_blank">-->
                    {{detail.institutionDetails.institutionID}},{{detail.institutionDetails.institutionName}}
                <!--</a>-->
          </span>
          <!--</textarea>-->
        </div>
      </div>
      <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" *ngIf="showSendSMS">
        <button type="button" class="btn cu-green-btn pull-left font-regular f-s-18">{{currentlanguage.referral_service?.send_sms}}</button>
      </div>
    </div>
  </div>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" *ngIf="showTableCondition">
    <h5><strong>{{currentlanguage.referral_service?.table_labels?.table_heading}}</strong></h5>
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>S.No.</th>
            <th>{{currentlanguage.referral_service?.table_labels?.institute_directory_map_id}}</th>
            <th>{{currentlanguage.referral_service?.table_labels?.institute_name}}</th>
            <th>{{currentlanguage.referral_service?.table_labels?.created_by}}</th>
            <th>{{currentlanguage.referral_service?.table_labels?.created_on}}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let referral of tableArray | paginate: {id:'refpaginate', itemsPerPage: 3, currentPage: p };let i=index " style="cursor: pointer;">
            <td width=10%>{{(p-1)*(3)+(i+1)}}</td>
            <td>{{referral.instituteDirMapID}}</td>
            <td>{{referral.instituteDirectoryMapping.institutionDetails.institutionName}}</td>
            <td>{{referral.createdBy}}</td>
            <td>{{referral.createdDate|date:'dd/MM/yyyy HH:mm'}}</td>
          </tr>
        </tbody>
        <tr>
          <td colspan="6">
            <pagination-controls id="refpaginate" (pageChange)="p = $event"></pagination-controls>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" *ngIf="showTableCondition">
    <button class="btn pull-right" (click)="showForm()">{{currentlanguage.referral_service?.new_referral}}</button>
  </div>
</div>
